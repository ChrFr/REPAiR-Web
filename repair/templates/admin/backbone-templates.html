{% load i18n %}

<!-- Backbone templates (Underscore template engine) for rendering dynamic views in admin area -->


<!-- Flows  -->

<script type="text/template" id="flows-edit-template">
  <h3> <%= casestudy %> > <%= keyflow %> > {% trans "Flows" %}</h3>
  </br>
  <div class="row">  
    <div class="col-md-12">
      <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#data-entry-tab" id='data-link'>{% trans "Data Entry" %}
        <li><a data-toggle="tab" href="#sankey-tab">{% trans "Data View" %}</a></li>
        <li><a data-toggle="tab" href="#verification">{% trans "Verification" %}</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane fade in active" id="data-entry-tab">
          <div class="row" style="margin-left: 15px;">  
            {% trans "Activity Groups" %} / {% trans "Activities" %} / {% trans "Actors" %}
          </div>
          <div class="row">  
            <div class="col-md-3">
              <div id="data-tree"></div>
            </div>
            <div class="col-md-9">
              <div id="edit-node"></div>
            </div>
          </div>
        </div>
        <div class="tab-pane fade in" id="sankey-tab">
          {% trans "Level" %}
          <select name="data-view-type-select" id="data-view-type-select" style="margin-left: 5px; margin-right: 5px;">
            <option value="activitygroup">{% trans "Activity Group" %}</option>
            <option value="activity">{% trans "Activity" %}</option>
            <option value="actor">{% trans "Actor" %}</option>
          </select>
          <button title="{% trans "Refresh Sankey-Diagram" %}" type="button" id="refresh-dataview-btn" class="btn btn-primary round">
            <span class="glyphicon glyphicon-refresh"></span>
          </button>
          <div class="row">
            <div id="sankey-wrapper">
              <button id="fullscreen-toggle" title="{% trans "toggle fullscreen" %}" class="glyphicon glyphicon-fullscreen btn btn-primary"></button>
              <div id="sankey" class="bordered"></div>
            </div>
          </div>
        </div>
        <div class="tab-pane fade in" id="verification">
          {% include "admin/verification.html" %}
        </div>
      </div>
    </div>
  </div>
</script>

<!-- template for view on editing a node -->
<script type="text/template" id="edit-node-template">
  <div class="col-md-12" style="border: solid 1px #ddd">
    <div class="row">
      <h3>
        <%= name %> 
        <div id='node-info' title="{% trans "Details" %}" class="glyphicon glyphicon-info-sign" style="cursor: pointer; margin-left: 5px;"></div>
      </h3>
      <button id='upload-flows-button' title="{% trans "upload changes made to the flows" %}" class="btn btn-danger">
        <span class="glyphicon glyphicon-upload"></span> {% trans "Upload Changes" %}
      </button>
    </div>
    </br>
    </br>
    <div class="row bordered" style="overflow-x:auto;">
      <h4>{% trans "Input" %}</h4>
      <table id='input-table' class='table'>
        <tr>
          <th>{% trans "Remove" %}</th>
          <th>{% trans "Amount" %}</th>
          <th>{% trans "Origin" %}</th>
          <th>{% trans "Product" %}</th>
          <th>{% trans "Raw" %}</th>
          <th>{% trans "Year" %}</th>
          <th>{% trans "Description" %}</th>
          <th>{% trans "Data Source" %}</th>
        </tr>
      </table>
      <button id='add-input-button' title="{% trans "add input" %}"><span class="glyphicon glyphicon-plus"></span></button>
    </div>
    <br>
    <div class="row bordered" style="overflow-x:auto;">
      <h4>{% trans "Output" %}</h4>
      <table id='output-table' class='table'>
        <tr>
          <th>{% trans "Remove" %}</th>
          <th>{% trans "Amount" %}</th>
          <th>{% trans "Destination" %}</th>
          <th>{% trans "Product" %}</th>
          <th>{% trans "Raw" %}</th>
          <th>{% trans "Year" %}</th>
          <th>{% trans "Description" %}</th>
          <th>{% trans "Data Source" %}</th>
        </tr>
        <tr>
      </table>
      <button id='add-output-button' title="{% trans "add output" %}"><span class="glyphicon glyphicon-plus"></span></button>
    </div>
    <br>
    <div class="row bordered" style="overflow-x:auto;">
        <h4>{% trans "Stock" %}</h4>
      <table id='stock-table' class='table'>
        <tr>
          <th>{% trans "Remove" %}</th>
          <th>{% trans "Amount" %}</th>
          <th>{% trans "Product" %}</th>
          <th>{% trans "Raw" %}</th>
          <th>{% trans "Year" %}</th>
          <th>{% trans "Description" %}</th>
          <th>{% trans "Data Source" %}</th>
        </tr>
      </table>
      <button id='add-stock-button' title="{% trans "add stock" %}"><span class="glyphicon glyphicon-plus"></span></button>
    </div>
  </div>
</script>

<script type="text/template" id="popover-product-template">
  <!--<b><%= productName %></b>-->
  <% _.each(fractions, function(fraction){ %>
    <div class='row'> <%= fraction.fraction * 100 %>% <%= materials.get(fraction.material).get('name') %></div>
  <% }); %>
</script>

<!-- template for view on attributes of an activitygroup-node -->
<script type="text/template" id="group-attributes-template">
  <h4>{% trans "Activitygroup" %}</h4>
  <table>
    <tr>
      <td>{% trans "Name" %}</td>
      <td><b><%= name %></b></td>
    </tr>
    <tr>
      <td>{% trans "Flow" %}</td>
      <td><%= keyflow %></td>
    </tr>
    <tr>
      <td>{% trans "Code" %}</td>
      <td><%= code %></td>
    </tr>
  </table>
</script>

<!-- template for view on attributes of an activity-node -->
<script type="text/template" id="activity-attributes-template">
  <h4>{% trans "Activity" %}</h4>
  <table>
    <tr>
      <td>{% trans "Name" %}</td>
      <td><b><%= name %></b></td>
    </tr>
    <tr>
      <td>{% trans "Keyflow" %}</td>
      <td><%= keyflow %></td>
    </tr>
    <tr>
      <td>{% trans "Activity Group" %}</td>
      <td><%= group %></td>
    </tr>
    <tr>
      <td>{% trans "NACE Code" %}</td>
      <td><%= nace %></td>
    </tr>
  </table>
</script>

<!-- template for view on attributes of an actor-node -->
<script type="text/template" id="actor-attributes-template">
  <h4>{% trans "Actor" %}</h4>
  <table>
    <tr>
      <td>{% trans "Name" %}</td>
      <td><b><%= name %></b></td>
    </tr>
    <tr>
      <td>{% trans "Keyflow" %}</td>
      <td><%= keyflow %></td>
    </tr>
    <tr>
      <td>{% trans "Activity" %}</td>
      <td><%= activity %></td>
    </tr>
    <tr>
      <td>{% trans "BvDid" %}</td>
      <td><%= bvdid %></td>
    </tr>
    <tr>
      <td>{% trans "Year" %}</td>
      <td><%= year %></td>
    </tr>
    <tr>
      <td>{% trans "Employees" %}</td>
      <td><%= employees %></td>
    </tr>
    <tr>
      <td>{% trans "Turnover" %}</td>
      <td><%= turnover %></td>
    </tr>
    <tr>
      <td>{% trans "Website" %}</td>
      <td><a target="_blank" href="http://<%= url %>"><%= url %></a></td>
    </tr>
  </table>
</script>


<!-- Actors -->

<script type="text/template" id="actors-edit-template">
  <h3> <%= casestudy %> > <%= keyflow %> > {% trans "Actors" %}</h3>
  </br>
  <div class="row">
    <button id='upload-actors-button' title="{% trans "upload changes made to actors and their locations" %}" class="btn btn-danger">
      <span class="glyphicon glyphicon-upload"></span> {% trans "Upload Changes" %}
    </button>
  </div>
  </br>
  <div class="row">
    {% trans "Filter table" %}
    <select name="included-filter" id="included-filter-select">
      <option value="0">{% trans "show all" %}</option>
      <option value="1">{% trans "show included only" %}</option>
    </select>
  </div>
  <div class="row">
    <div class='col-md-9 bordered' style="resize: horizontal; overflow: auto">
      <div class="row" style="overflow-x:auto;">
        <table id='actors-table' class='tablesorter'>
          <thead>
            <tr>
              <th>{% trans "Included" %}</th>
              <th>{% trans "Name" %}</th>
              <th>{% trans "Activity" %}</th>
              <th>{% trans "Website" %}</th>
              <th>{% trans "Year" %}</th>
              <th>{% trans "Turnover" %}</th>
              <th>{% trans "Employees" %}</th>
              <th>{% trans "BvDid" %}</th>
              <th>{% trans "BvDii" %}</th>
              <th>{% trans "ConsCode" %}</th>
            </tr>
          </thead> 
          <tbody> 
          </tbody> 
        </table>
      </div>
      <div class="row">
        <button id='add-actor-button'  title="{% trans "add new actor" %}"><span class="glyphicon glyphicon-plus"></span></button>
        <!-- pager -->
        <div id="pager" class="pager">
          <form>
            <img src="{{STATIC_URL}}img/first.png" class="first"/>
            <img src="{{STATIC_URL}}img/prev.png" class="prev"/>
            <!-- the "pagedisplay" can be any element, including an input -->
            <input type="text" class="pagedisplay"/>
            <img src="{{STATIC_URL}}img/next.png" class="next"/>
            <img src="{{STATIC_URL}}img/last.png" id="goto-last-page" class="last"/>
            <select id="pagesize" class="pagesize">
              <option value="20">20</option>
              <option value="40">40</option>
              <option value="60">60</option>
              <option value="100">100</option>
              <option value="1000">1000</option>
            </select>
          </form>
        </div>
      </div>
    </div>
    <div class='col-md-3' style="border: 1px solid #e6e6e6;">
      
      <h4 id="actor-name" class="row">{% trans "Please choose an actor by clicking a row." %}</h4>
      <div id="actors-map" style="min-height: 400px" class="map row"></div>
      </br>
      <div id='location-wrapper' style="display: None;">
        <div class="bordered" class="row">
          <table id="adminloc-table">
            <h4>Administrative Location</h4>
            <thead>
                <tr>
                  <th></th>
                  <th>{% trans "Name" %}</th>
                <th style="text-align: right;">{% trans "Edit Loc." %}</th>
                </tr>
              </thead> 
              <tbody> 
              </tbody> 
          </table>
          <button id='add-administrative-button' title="{% trans "add administrative location" %}"><span class="glyphicon glyphicon-plus"></span></button>
        </div>
        </br>
        <div class="bordered" class="row">
          <table id="oploc-table">
            <h4>Operational Locations</h4>
            <thead>
              <tr>
                <th></th>
                <th>{% trans "Name" %}</th>
                <th style="text-align: right;">{% trans "Edit Loc." %}</th>
              </tr>
            </thead> 
            <tbody> 
            </tbody> 
          </table>
          <button id='add-operational-button' title="{% trans "add operational location" %}"><span class="glyphicon glyphicon-plus"></span></button>
        </div>
      </div>
    </div>
  </div>
  <a href="#content" id="to-top-anchor">to top &#x2BC5</a>
  <div id="location-modal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
      <!-- Modal content-->
      <div class="modal-content col-md-12">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">{% trans "Edit Location" %}</h4>
        </div>
        <div class="modal-body">
          <div class='row'>
            <div id='edit-location-map'  class="col-md-6" style="min-height: 400px; min-width: 400px"></div>
            <div id='location-modal-content' class="col-md-6"> </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn" data-dismiss="modal" aria-hidden="true">{% trans "Cancel"%}</button>
          <button class="btn btn-primary" id="confirm-location" data-dismiss="modal" aria-hidden="true">{% trans "OK"%}</button>
        </div>
      </div>
    </div>
  </div>
</script>

<!-- edit location -->
<script type="text/template" id="location-modal-template">
  <table id="location-edit-table">
    <tr>
      <td>{% trans "Name" %}</td>
      <td><input type="text" name="name" value="<%= properties.name %>"></td>
    </tr>
    <tr>
      <td>{% trans "City" %}</td>
      <td><input type="text" name="city" value="<%= properties.city %>"></td>
    </tr>
    <tr>
      <td>{% trans "Postcode" %}</td>
      <td><input type="text" name="postcode" value="<%= properties.postcode %>"></td>
    </tr>
    <tr>
      <td>{% trans "Street" %}</td>
      <td><input type="text" name="address" value="<%= properties.address %>"></td>
    </tr>
  </table>
</script>

<!-- Products -->

<script type="text/template" id="products-edit-template">
  <h3> <%= casestudy %> > <%= keyflow %> > {% trans "Products" %}</h3>
  <div class="row">
    <button id='upload-products-button' title="{% trans "upload changes made to products" %}" class="btn btn-danger">
      <span class="glyphicon glyphicon-upload"></span> {% trans "Upload Changes" %}
    </button>
  </div>
  </br>
  <div class="row">
    <div class='col-md-9' style="resize: horizontal; overflow: auto; border: 1px solid #e6e6e6;">
      <div class="row" style="overflow-x:auto;">
        <table id='products-table' class='tablesorter'>
          <thead>
            <tr>
              <th>{% trans "Name" %}</th>
              <th>{% trans "Fractions" %}</th>
              <th>{% trans "Default" %}</th>
            </tr>
          </thead> 
          <tbody> 
          </tbody> 
        </table>
      </div>
    </div>
  </div>
  <a href="#content" id="to-top-anchor">to top &#x2BC5</a>
</script>
