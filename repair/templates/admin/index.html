{% extends "base.html" %}
{% load i18n %}
{% load require %}

{% block sidebar %}
  <script> 
    document.getElementById("admin-area-link").classList.add('active');
  </script>
  <ul class="nav nav-pills nav-stacked" id="sidebar">
    <li class="active"><a href="#flows-edit" data-toggle="pill"> {% trans "Edit Flows" %} <span class="sub-icon glyphicon glyphicon-pencil"></span></a></li>
  </ul>
{% endblock %}

{% block content %}
  <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/admin-area.css" />
  <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/bootstrap-treeview.min.css" />
  <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/sankey.css" />
  <div class="tab-content">
    <div class="tab-pane fade in active" id="base-data">
      <div class="row">
        <div class="col-md-9">
          <div class="col-md-4">
            {% trans "Case Study" %} 
            <br>
            <select name="case-studies">
              {% for cs in case_studies %}
                  <option value="{{ cs.id }}">{{ cs.name }}</option>
              {% endfor %}
            </select> 
          </div>
          <div class="col-md-4">
            {% trans "Flow" %}
            <br>
            <select name="flows">
              {% for f in flows %}
                  <option value="{{ f.id }}">{{ f.name }}</option>
              {% endfor %}
            </select> 
          </div>
          <div class="col-md-4">
            {% trans "Data Entered by" %}
            <br>
            <input type="text" name="user">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-9">
          <ul class="nav nav-tabs">
            <li><a data-toggle="tab" href="#data-entry" id='data-link'>{% trans "Data Entry" %}</a></li>
            <li class="active"><a data-toggle="tab" href="#sankey-tab">{% trans "Data View" %}</a></li>
            <li><a data-toggle="tab" href="#verification">{% trans "Verification" %}</a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane" id="data-entry">
              <div class="tab-content">
                <div class="tab-pane active admin-tab" id="admin-info-tab">
                  {% trans "Please select a level to enter data" %}
                </div>
                <div class="tab-pane admin-tab" id="activity-group-edit">
                  {% include "admin/activity-groups-edit.html" %}
                </div>
                <div class="tab-pane admin-tab" id="activity-edit">
                  {% include "admin/activity-edit.html" %}
                </div>
                <div class="tab-pane admin-tab" id="actor-edit">
                  {% include "admin/actor-edit.html" %}
                </div>
              </div>
            </div>
            <div class="tab-pane active" id="sankey-tab">
              <div class="row">
                <button type="button" id="refresh-view-btn">
                  {% trans "Refresh" %}
                </button> 
              </div>
              <div class="row"><div id="sankey"></div></div>
            </div>
            <div class="tab-pane" id="verification">
              {% include "admin/verification.html" %}
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="row" id="balance-verify-single">
            <div class="col-md-8">
              <button type="button" id="balance-verify-data-btn">
                {% trans "Balance & Verify Data" %}
              </button> 
            </div>
          </div>
          <div class="row" id="balance-verify-button-group">
            <div class="col-md-4">
              <button type="button" id="balance-data-btn">
                {% trans "Balance Data" %}
              </button> 
            </div>
            <div class="col-md-4">
              <button type="button" id="verify-data-btn">
                {% trans "Verify Data" %}
              </button> 
            </div>
          </div>
          <div class="row" id="data-tree-group">
            {% trans "Please choose the level for which you wish to enter data" %}
            <div id="data-tree"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% require_module 'admin-area.js' %}
{% endblock %}