{% extends "base.html" %}
{% load i18n %}
{% load require %}

{% block sidebar %}
  <script>
    document.getElementById("admin-area-link").classList.add('active');
  </script>
  <ul class="nav nav-pills nav-stacked" id="sidebar">
    <li class="active"><a href="#flows-edit" data-toggle="pill"> {% trans "Edit Flows" %} <span class="sub-icon glyphicon glyphicon-pencil"></span></a></li>
  </ul>
{% endblock %}

{% block content %}
  <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/admin-area.css" />
  <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/bootstrap-treeview.min.css" />
  <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/sankey.css" />

  <div class="tab-content">
    <!-- Flow editor -->
    <div class="tab-pane fade in active" id="flows-edit">
      <div class="row">
        <div class="col-md-9">
          <div class="col-md-4">
            {% trans "Case Study" %}
            <br>
            <select name="case-studies" id="case-studies-select">
              {% for cs in case_studies %}
                  <option value="{{ cs.id }}">{{ cs.name }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-md-4">
            {% trans "Flow" %}
            <br>
            <select name="flows" id="flows-select">
              {% for f in flows %}
                  <option value="{{ f.id }}">{{ f.code }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-md-4">
            {% trans "Data Entered by" %}
            <br>
            <input type="text" name="user">
          </div>
        </div>
      </div>
      <div class="row">  <div class="col-md-9">
        <ul class="nav nav-tabs">
          <li class="active"><a data-toggle="tab" href="#data-entry-tab" id='data-link'>{% trans "Data Entry" %}</a></li>
          <li><a data-toggle="tab" href="#sankey-tab">{% trans "Data View" %}</a></li>
          <li><a data-toggle="tab" href="#verification">{% trans "Verification" %}</a></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="data-entry-tab">
            <div class="row"><div id="data-entry"></div></div>
          </div>
          <div class="tab-pane" id="sankey-tab">
            <div class="row">
              <button type="button" id="refresh-view-btn">
                {% trans "Refresh" %}
              </button> 
            </div>
            <div class="row"><div id="data-view"></div></div>
          </div>
          <div class="tab-pane" id="verification">
            {% include "admin/verification.html" %}
          </div>
        </div>
      </div>
    </div>
  </div>
{% include "admin/backbone-templates.html" %}
{% require_module 'admin-area.js' %}
{% endblock %}