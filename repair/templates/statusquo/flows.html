{% load i18n %}
{% block content %}

<script type="text/template" id="flows-template">
<div class="row bordered" >
  <div class="row shaded" data-toggle="collapse" data-target=".row.filters" style='cursor: pointer;'>
    <button class="btn btn-primary square inverted" style="margin-right: 5px; float: left;">
      <span class="glyphicon glyphicon-eye-open"></span>
    </button>
    <h4 style="margin-top: 3px;">{% trans "Filters" %}</h4>
  </div>
  <div class="collapse row filters">
    <div class="col-md-3">
      <label style="margin: 0px">{% trans "Areas" %}</label>
      <table style="margin: 0px">
        <tr>
          <td style="vertical-align:top; width:1%;">
            <button id="area-select-button" class="btn">{% trans "Select Areas" %}</button>
          </td>
          <td id="area-selections">
          </td>
      </tr>
      </table>
    </div>
    <div class="col-md-3">
      <div class='row'>
        <b>{% trans "Material" %}</b>
        <div id='material-filter'></div>
      </div>
      <div class='row' title='Aggregate all derived materials to the level of the direct child materials'>
        <input type='checkbox' checked name='aggregateMaterials'>{% trans 'aggregate materials' %}
      </div>
    </div>
    <div class="col-md-3">
      <b>{% trans "Flow Type" %}</b>
      <select name="waste" class="form-control">
        <option value=''> {% trans "Products and Waste" %} </option>
        <option value='False'> {% trans "Products" %} </option>
        <option value='True'> {% trans "Waste" %} </option>
      </select>
    </div>
  </div>
  <div class="collapse row filters" style="margin-top: 20px">
    <div class="row" style="margin-left: 20px">
      <label class="radio-inline"><input type="radio" name="direction" value="both" checked>{% trans "From/To" %}</label>
      <label class="radio-inline"><input type="radio" name="direction" value="from">{% trans "From" %}</label>
      <label class="radio-inline"><input type="radio" name="direction" value="to">{% trans "To" %}</label>
    </div>
    <div class="row">
      <div class="col-md-3">
        <b>{% trans "Activity Group" %}</b>
        <select name="group" class="form-control"></select>
        <div style="font-size: 30px; position: absolute; right: -10px; top: 15px;">></div>
      </div>
      <div class="col-md-3">
        <b>{% trans "Activity" %}</b>
        <select name="activity" class="form-control"></select>
        <div style="font-size: 30px; position: absolute; right: -10px; top: 15px;">></div>
      </div>
      <div class="col-md-3">
        <b>{% trans "Actor" %}</b>
        <select name="actor" class="form-control" multiple style="resize: vertical;"></select>
      </div>
    </div>
  </div>
  <div class="collapse row filters" style="margin-top: 20px; margin-left: 20px;">
    <button id='apply-filters' class="btn btn-primary" title="{% trans "Apply Filters" %}">{% trans "Apply Filters" %}</button>
  </div>
</div>
<div class="row" style="margin-top: 20px;">
  <div class="col-md-6">
    <div id="flow-diagram">
      <div class="row">
        <label class="input-label">{% trans "Level" %} </label>
        <select class="form-control" name="data-view-type-select" id="data-view-type-select" style="max-width: 200px;">
          <option value="activitygroups">{% trans "Activity Group" %}</option>
          <option value="activities">{% trans "Activity" %}</option>
          <option value="actors">{% trans "Actor" %} </option>
        </select>
      </div>
      <div class="row" style="position: relative;">
        <div id="sankey-wrapper" class="noselect" style="width: 100%;">
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <ul class="nav nav-tabs">
      <li class="active"><a data-toggle="tab" href="#flow-map-panel">{% trans "Flow Map" %}</a></li>
      <li><a data-toggle="tab" href="#chloropleth-map-panel">{% trans "Chloropleth Map" %}</a></li>
    </ul>
    <div class="tab-pane fade in active" id="flow-map-panel">
      <div id="flow-map" style="width: 100%">
        <img src='/static/img/flow-sankey-preview.png'>
      </div>
    </div>
    <div class="tab-pane fade in" id="chloropleth-map-panel">
      <h4>ToDo</h4>
    </div>
  </div>
</div>

<div id="area-filter-modal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">
    <!-- Modal content-->
    <div class="modal-content col-md-12">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{% trans "Select Areas" %}</h4>
      </div>
      <div class="modal-body">
        <div class='row'>
          <label class="input-label">{% trans "Level" %}</label>
          <select name="level-select" class="form-control" style="max-width: 350px;">
          <%  levels.forEach(function(level) { %>
            <option value="<%= level.id %>"> <%= level.get('name') %></option>
          <% })  %>
          </select>
        </div>
        <div class='row'>
          <div id='area-select-map' oncontextmenu="return false;" style="min-height: 400px; min-width: 400px; width: 100%; height: 100%;"></div>
        </div>
        <div class='row'>
          <label>{% trans "Selected Areas:" %}</label>
          <div id="modal-area-selections"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn cancel" data-dismiss="modal">Cancel</button>
        <button class="btn btn-primary confirm" data-dismiss="modal" aria-hidden="true">{% trans "OK"%}</button>
      </div>
    </div>
  </div>
</div>
</script>

{% endblock %}