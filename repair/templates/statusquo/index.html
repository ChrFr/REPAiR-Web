{% extends "base.html" %}
{% load i18n %}
{% load render_bundle from webpack_loader %}

{% block sidebar %}
  <script>
    document.getElementById("status-quo-link").classList.add('active');
  </script>
  <ul class="nav nav-pills nav-stacked" id="sidebar">
    <li class="active"><a href="#flows" data-toggle="pill"> {% trans "Flows" %} <span class="sub-icon fa fa-recycle"></span></a></li>
    <li><a href="#challenges" data-toggle="pill">{% trans "Challenges/Aims" %} <span class="sub-icon glyphicon glyphicon-list-alt"></span></a></li>
    <li><a href="#flow-assessment" data-toggle="pill">{% trans "Flow Assessment" %} <span class="sub-icon fas fa-chart-bar"></span></a></li>
    <li><a href="#sustainability-assessment" data-toggle="pill">{% trans "Sustainability" %} <span class="sub-icon far fa-clock"></span></a></li>
    {% if request.session.mode != 1 %}
    <li><a href="#targets" data-toggle="pill">{% trans "Targets" %} <span class="sub-icon glyphicon glyphicon-screenshot"></span></a></li>
    {% endif %}
  </ul>
{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/sankey.css" />
<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/drag.css" />

<div class="tab-content">
  <div class="tab-pane fade in active" id="flows">
    <div class="row bordered">
      <h4 style="margin-right: 10px; float: left;">{% trans "Keyflow" %}</h4>
      <select name="keyflow" class="form-control" style="max-width: 500px;" disabled>
        <option disabled selected> {% trans "Select" %} </option>
        {% for keyflow in keyflows %}
          <option value="{{ keyflow.id }}"> {{ keyflow.keyflow.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div id="flows-content"></div>
  </div>
  <div class="tab-pane fade" id="challenges"></div>
  <div class="tab-pane fade" id="flow-assessment">
    <div class="row bordered">
      <h4 style="margin-right: 10px; float: left;">{% trans "Keyflow" %}</h4>
      <select name="keyflow" class="form-control" style="max-width: 500px;" disabled>
        <option disabled selected> {% trans "Select" %} </option>
        {% for keyflow in keyflows %}
          <option value="{{ keyflow.id }}"> {{ keyflow.keyflow.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div id="flow-assessment-content"></div>
  </div>
  <div class="tab-pane fade" id="sustainability-assessment"></div>
  {% if request.session.mode != 1 %}
  <div class="tab-pane fade" id="targets"></div>
  {% endif %}
</div>
  
{% include "statusquo/flows.html" %}
{% include "statusquo/challenges-aims.html" %}
{% include "statusquo/sustainability.html" %}
{% if request.session.mode != 1 %} <!-- workshop -->
{% include "statusquo/targets.html" %}
{% include "statusquo/workshop-flow-assessment.html" %}
{% else %} <!-- setup -->
{% include "statusquo/setup-flow-assessment.html" %}
{% endif %}

<script type="text/template" id="area-select-modal-template">
<div class="modal-dialog modal-lg">
  <!-- Modal content-->
  <div class="modal-content col-md-12">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 class="modal-title">{% trans "Select Areas" %}</h4>
    </div>
    <div class="modal-body">
      <div class='row'>
        <label class="input-label">{% trans "Level" %}</label>
        <select name="level-select" class="form-control" style="max-width: 350px;">
        <%  levels.forEach(function(level) { %>
          <option value="<%= level.id %>"> <%= level.get('name') %></option>
        <% })  %>
        </select>
      </div>
      <div class='row'>
        <div class='map' oncontextmenu="return false;" style="min-height: 400px; min-width: 400px; width: 100%; height: 100%;"></div>
      </div>
      <div class='row'>
        <label>{% trans "Selected Areas:" %}</label>
        <div class="selections"></div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn cancel" data-dismiss="modal">Cancel</button>
      <button class="btn btn-primary confirm" data-dismiss="modal" aria-hidden="true">{% trans "OK"%}</button>
    </div>
  </div>
</div>
</script>

{% render_bundle 'StatusQuo' %}

{% endblock %}
