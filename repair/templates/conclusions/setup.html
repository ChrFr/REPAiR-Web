{% extends "base.html" %}
{% load i18n %}
{% load render_bundle from webpack_loader %}

{% block title %}{% trans "REPAiR | Recommendations" %}{% endblock %}

{% block sidebar %}
  <script>
    document.getElementById("conclusions-link").classList.add('active');
  </script>
  <ul class="nav nav-pills nav-stacked" id="sidebar">
    <li class="active"><a href="#users" data-toggle="pill">{% trans "Users" %} <span class="sub-icon fas fa-users"></span></a></li>
    <li><a href="#notepad" data-toggle="pill">{% trans "Notepad" %} <span class="sub-icon far fa-comments"></span></a></li>
    <li><a href="#sustainability" data-toggle="pill">{% trans "Sustainability" %} <span class="sub-icon fas fa-leaf"></span></a></li>
  </ul>
{% endblock %}

{% block content %}
{% if not conclusions_permitted %}
  <h3>{% trans "You do not have the permission to view the conclusions." %}</h3>
  {% render_bundle 'Base' %}
{% else %}
  <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/drag.css" />
  <div class="tab-content">
    <div class="tab-pane fade in active" id="users">
      <div class="col-md-6">
        <h3> {% trans "Define which users (small groups) should be included into the evaluation of the conclusions." %} </h3>
        <table id="user-table" class="entry-table table">
          <tr>
            <th>{% trans "User in case study" %}</th>
            <th>{% trans "Alias in evaluation" %}</th>
            <th>{% trans "is part of evaluation" %}</th>
          </tr>
        </table>
      </div>
    </div>
    <div class="tab-pane fade in" id="notepad">
      <div class="col-md-6">
        <div class="row">
          <h3> {% trans "Organizing Consensus Levels" %} </h3> ({% trans 'e.g. "common ground", "to be discussed", "disagreement"' %})
          <div id='consenus-levels' class="col-md-12 bordered">
            <div class='item-panel'>
            </div>
            <button class="add btn btn-primary square" data-type="consensus" title="{% trans "add consensus level" %}">
              <span class="glyphicon glyphicon-plus"></span> {% trans "Consensus Level" %}
            </button>
          </div>
        </div>
        <div class="row">
          <h3> {% trans "Organizing Sections" %} </h3> ({% trans 'e.g. "legal framework", "waste management", "general aspects"' %})
          <div id='sections' class="col-md-12 bordered">
            <div class='item-panel'>
            </div>
            <button class="add btn btn-primary square" data-type="sections" title="{% trans "add section" %}">
              <span class="glyphicon glyphicon-plus"></span> {% trans "Section" %}
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="sustainability" data-step="Sustainability">
      <div id="sustainability-content">
      </div>
    </div>
  </div>
  {% render_bundle 'Recommendations' %}
{% endif %}

<script type="text/template" id="sustainability-template">
  <div class="row">
    <button title="Add report" id="add-report" class="btn btn-primary">
      <span class="glyphicon glyphicon-plus"></span>
      {% trans "Add" %}
    </button>
  </div>
  <div id="report-previews" class="row overflow bordered" style="overflow-y: hidden; margin-top: 10px; background-color: #fafafa; box-shadow: inset 0 0 5px #d5d5d5;"></div>

  <div id="report-content"></div>
  <div class="bordered sunken" id="canvas-wrapper" style='background-color: white; text-align: center; display: none; overflow: auto;'>
    <div class="row">
      <div style="float: left;">
        <h4 id="page-status" style="float: left; margin: 5px 10px 0px 0px;"></h4>
        <button class="btn btn-primary square" id="prev">{% trans "Previous" %}</button>
        <button class="btn btn-primary square" id="next">{% trans "Next" %}</button>
      </div>
      <div style="float: right;">
        <button class="fullscreen-toggle fas fa-expand btn btn-primary"></button>
      </div>
    </div>
    <canvas></canvas>
  </div>
</script>

<script type="text/template" id="report-preview-item-template">
<div class="item-content shaded bordered">
  <div class="row">
    <button class="btn btn-warning square remove" title="Remove solution" style="float: right;">
      <span class="glyphicon glyphicon-minus"></span>
    </button>
    <button class="btn btn-primary square edit" title="Edit solution" style="float: right; margin-right: 5px;">
      <span class="glyphicon glyphicon-pencil"></span>
    </button>
    <h5 class='title' title="<%= report.get('name') %>"> <%= report.get('name') %> </h5>
  </div>
  <div class="row">
    <img src="<%= report.get('thumbnail') %>" alt='-' style="height: 200px;">
  </div>
</div>
</script>

{% endblock %}

